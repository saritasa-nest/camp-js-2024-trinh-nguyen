<div class="anime-table-container">
	@if(animeListPagination$ | async; as animeList){
	<div class="anime-table__header">
		<camp-search (searchChanged)="onSearchChange($event)" [search]="(filter$ | async)!.search ?? ''" />
		<camp-filter-type
			(typeChange)="onSelectChange($event)"
			[selectedTypes]="(filter$ | async)!.type ?? null"
			class="anime-table__filter-type"
		/>
		<mat-paginator
			class="anime-table__paginator"
			[pageSizeOptions]="[5, 10, 20]"
			[pageSize]="(filter$ | async)!.pageSize"
			[pageIndex]="(filter$ | async)!.pageNumber"
			[length]="animeList.totalCount"
			(page)="onPaginationChange($event)"
		/>
	</div>
	<div>
		<table
			mat-table
			matSort
			matSortDisableClear
			(matSortChange)="onSortChange($event)"
			[dataSource]="animeList.items"
			class="anime-table-wrapper"
		>
			<ng-container class="table__image-container" [matColumnDef]="animeTableColumns.IMAGE">
				<mat-header-cell class="anime-table__item anime-table__item--textColor" *matHeaderCellDef>
					Image
				</mat-header-cell>
				<mat-cell class="anime-table__item anime-table__item--textColor" *matCellDef="let element">
					<div>
						<img [src]="element.imageUrl" alt="{{ element.titleJapan }}" class="table__item-image" />
					</div>
				</mat-cell>
			</ng-container>
			<ng-container [matColumnDef]="animeTableColumns.TITLE_EN">
				<mat-header-cell mat-sort-header class="anime-table__item anime-table__item--textColor" *matHeaderCellDef>
					{{ animeTableColumns.TITLE_EN }}
				</mat-header-cell>
				<mat-cell class="anime-table__item anime-table__item--textColor" *matCellDef="let element">
					{{ element.titleEnglish | appNullable }}
				</mat-cell>
			</ng-container>

			<ng-container [matColumnDef]="animeTableColumns.TITLE_JPN">
				<mat-header-cell *matHeaderCellDef> {{ animeTableColumns.TITLE_JPN }} </mat-header-cell>
				<mat-cell class="anime-table__item anime-table__item--textColor" *matCellDef="let element">
					{{ element.titleJapan | appNullable }}
				</mat-cell>
			</ng-container>

			<ng-container [matColumnDef]="animeTableColumns.AIRED_START">
				<mat-header-cell mat-sort-header *matHeaderCellDef> {{ animeTableColumns.AIRED_START }}</mat-header-cell>
				<mat-cell class="anime-table__item anime-table__item--textColor" *matCellDef="let element">
					{{ element.aired.start | appNullable }}
				</mat-cell>
			</ng-container>

			<ng-container [matColumnDef]="animeTableColumns.TYPE">
				<mat-header-cell *matHeaderCellDef> {{ animeTableColumns.TYPE }}</mat-header-cell>
				<mat-cell class="anime-table__item anime-table__item--textColor" *matCellDef="let element">
					{{ element.type | appNullable }}
				</mat-cell>
			</ng-container>

			<ng-container [matColumnDef]="animeTableColumns.STATUS">
				<mat-header-cell mat-sort-header class="anime-table__item anime-table__item--textColor" *matHeaderCellDef>
					{{ animeTableColumns.STATUS }}
				</mat-header-cell>
				<mat-cell class="anime-table__item anime-table__item--textColor" *matCellDef="let element">
					<span>{{ element.status | appNullable }}</span>
				</mat-cell>
			</ng-container>

			<mat-header-row class="anime-table__header-row" *matHeaderRowDef="animeTableColumnsArray"></mat-header-row>
			<mat-row class="anime-table__row" *matRowDef="let row; columns: animeTableColumnsArray"></mat-row>
		</table>
	</div>
	}
</div>
